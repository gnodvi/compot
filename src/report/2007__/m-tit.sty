%-----------------------------------------------------------------------------------------
%%% 21.01.2002. Кондратьев А.А.
%%% Стиль для создания титульной страницы отчета ВНИИТФ (переделано из a4title_m.sty)
%%% (должен использоваться совместно с классом mbreport.cls)

%%% Определены следующие опции:
%%%   authpage -- для печати списка авторов на отдельном листе
%%%   afterbosses -- для печати списка авторов после списка начальников в правую колонку
%%%     на одном листе (отключено authpage)

%%% Определены следующие команды:
%%%   \udk{УДК} -- задать номер УДК
%%%   \reg{номер} -- задать регистрационный номер
%%%   \inv{номер} -- задать инвентарный номер
%%%   \grif{гриф секретности} -- задать гриф секретности
%%%   \ekz{номер} -- задать номер экземпляра
%%%   \approved{должность}{фамилия} -- начальник(и), который утверждает документ (до двух)
%%%   \apprsize{0.4} -- доля страницы для написания утверждающего начальника
%%%   \boss{должность}{фамилия} -- начальник(и) (до восьми)
%%%   \bosshead{} -- (необязательно) надпись перед списком начальников
%%%   \bosssize{0.4} -- доля страницы для написания авторов
%%%   \author{должность}{фамилия} -- автор(ы)(исполнители) (до десяти)
%%%   \authead{Список исполнителей:} -- надпись перед списком авторов
%%%   \authsize{0.4} -- доля страницы для написания авторов
%%%   \beforetitle{} -- текст перед названием отчета
%%%   \subtitle{} -- текст после названия отчета
%%%   \city{город} -- изменить название города (Снежинск)
%%%   \organ{организация} -- изменить название организации (ВСЕРОССИЙСКИЙ
%%%     НАУЧНО-ИССЛЕДОВАТЕЛЬСКИЙ ИНСТИТУТ ТЕХНИЧЕСКОЙ ФИЗИКИ ИМЕНИ АКАДЕМИКА Е.И.ЗАБАБАХИНА)
%%%   \doctype{название документа} -- изменить название документа (ОТЧЕТ)
%%% 
%-----------------------------------------------------------------------------------------
 
\NeedsTeXFormat{LaTeX2e} %
\ProvidesPackage{mbrtitle}[2002/01/21 v1.0b]

\newif\if@authorspage
\@authorspagefalse
\DeclareOption{authpage}{\@authorspagetrue}
\newif\if@afterbosses %
\@afterbossesfalse %
\DeclareOption{afterbosses}{\@afterbossestrue} %
\ProcessOptions\relax

%\newcommand{\@organ}{%
%\textbf{РОССИЙСКИЙ ФЕДЕРАЛЬНЫЙ ЯДЕРНЫЙ ЦЕНТР}\\%
%ВСЕРОССИЙСКИЙ
%  НАУЧНО-ИССЛЕДОВАТЕЛЬСКИЙ ИНСТИТУТ
%  ТЕХНИЧЕСКОЙ ФИЗИКИ им. академика Е.И.Забабахина \\%
%\textbf {(РФЯЦ-ВНИИТФ)}
%} %

%\newcommand{\@organ}{%
%\textbf{РОССИЙСКИЙ ФЕДЕРАЛЬНЫЙ ЯДЕРНЫЙ ЦЕНТР}\\%
%{\renewcommand\baselinestretch{1}ВСЕРОССИЙСКИЙ
%  НАУЧНО-ИССЛЕДОВАТЕЛЬСКИЙ ИНСТИТУТ
%  ТЕХНИЧЕСКОЙ ФИЗИКИ им. академика Е.И.Забабахина \\%
%}
%} %

%\newcommand{\@organ}{\renewcommand\baselinestretch{1}%
%{\normalsize\textbf{ФЕДЕРАЛЬНОЕ АГЕНСТВО ПО АТОМНОЙ ЭНЕРГИИ\\
%ФЕДЕРАЛЬНОЕ ГОСУДАРСТВЕННОЕ УНИТАРНОЕ ПРЕДПРИЯТИЕ\\[-6pt]
%РОССИЙСКИЙ ФЕДЕРАЛЬНЫЙ ЯДЕРНЫЙ ЦЕНТР}}\\%
%{\footnotesize \textbf{ВСЕРОССИЙСКИЙ
%  НАУЧНО-ИССЛЕДОВАТЕЛЬСКИЙ ИНСТИТУТ
%  ТЕХНИЧЕСКОЙ ФИЗИКИ ИМЕНИ АКАДЕМИКА Е.И.ЗАБАБАХИНА} \\%
%}} %

%\newcommand{\@organ}{\renewcommand\baselinestretch{1}%
%{\normalsize \textbf{ФЕДЕРАЛЬНОЕ ГОСУДАРСТВЕННОЕ УНИТАРНОЕ ПРЕДПРИЯТИЕ\\[-6pt]
%РОССИЙСКИЙ ФЕДЕРАЛЬНЫЙ ЯДЕРНЫЙ ЦЕНТР}}\\%
%\vspace{0.2cm} {\footnotesize \textbf{ВСЕРОССИЙСКИЙ
%  НАУЧНО-ИССЛЕДОВАТЕЛЬСКИЙ ИНСТИТУТ
%  ТЕХНИЧЕСКОЙ ФИЗИКИ ИМЕНИ АКАДЕМИКА Е.И.ЗАБАБАХИНА} \\%
%}} %

\newcommand{\@organ}{\renewcommand\baselinestretch{1}%
{\normalsize \textbf{ФЕДЕРАЛЬНОЕ ГОСУДАРСТВЕННОЕ УНИТАРНОЕ ПРЕДПРИЯТИЕ\\[-6pt]
ТАКОЙТО СЯКОЙТО РАСТАКОЙТО ЦEНТР}}\\%
\vspace{0.2cm} {\footnotesize \textbf{ВСЕРОССИЙСКИЙ
  НАУЧНО-ИССЛЕДОВАТЕЛЬСКИЙ ИНСТИТУТ
  ВСЯЧEСКИХ НАУК ИМEНИ АКАДEМИКА НEЗНАЙКИНА} \\%
}} %

\newcommand{\@city}{\CYRS\cyrn\cyre\cyrzh\cyri\cyrn\cyrs\cyrk}
\newcommand{\city}[1]{\renewcommand{\@city}{#1}}
\newcommand{\organ}[1]{\renewcommand{\@organ}{#1}}
\newcommand{\@doctype}{\CYRO\CYRT\CYRCH\CYRE\CYRT}
\newcommand{\doctype}[1]{\renewcommand{\@doctype}{#1}}
\newcommand{\@authead}{\CYRS\cyrp\cyri\cyrs\cyro\cyrk~
\cyri\cyrs\cyrp\cyro\cyrl\cyrn\cyri\cyrt\cyre\cyrl\cyre\cyrishrt}
\newcommand{\authead}[1]{\renewcommand{\@authead}{#1}}
\newcommand{\bosshead}[1]{\newcommand{\@bosshead}{#1}}

\newcommand{\udk}[1]{\newcommand{\@udk}{#1}}
\newcommand{\reg}[1]{\newcommand{\@reg}{#1}}
\newcommand{\inv}[1]{\newcommand{\@inv}{#1}}
\newcommand{\grif}[1]{\newcommand{\@grif}{#1}}
\newcommand{\perechen}[1]{\newcommand{\@perechen}{#1}}
\newcommand{\ekz}[1]{\newcommand{\@ekz}{#1}}

\newcommand{\boss}[2]{
 \ifx\undefined\@bspI
 \newcommand{\@bspI}{#1}  \newcommand{\@bsnI}{#2}
 \else
  \ifx\undefined\@bspII
  \newcommand{\@bspII}{#1}  \newcommand{\@bsnII}{#2}
  \else
   \ifx\undefined\@bspIII
   \newcommand{\@bspIII}{#1}  \newcommand{\@bsnIII}{#2}
   \else
    \ifx\undefined\@bspIV
    \newcommand{\@bspIV}{#1}  \newcommand{\@bsnIV}{#2}
    \else
     \ifx\undefined\@bspV
     \newcommand{\@bspV}{#1}  \newcommand{\@bsnV}{#2}
     \else
      \ifx\undefined\@bspVI
      \newcommand{\@bspVI}{#1}  \newcommand{\@bsnVI}{#2}
      \else
       \ifx\undefined\@bspVII
       \newcommand{\@bspVII}{#1}  \newcommand{\@bsnVII}{#2}
       \else
        \ifx\undefined\@bspVIII
        \newcommand{\@bspVIII}{#1}  \newcommand{\@bsnVIII}{#2}
        \else
      \PackageWarning{title}{It is too many - more than eight bosses!}%
 \fi\fi\fi\fi\fi\fi\fi\fi}

\newcommand{\approved}[2]{
 \ifx\undefined\@bspaI
 \newcommand{\@bspaI}{#1}  \newcommand{\@bsnaI}{#2}
 \else
  \ifx\undefined\@bspaII
  \newcommand{\@bspaII}{#1}  \newcommand{\@bsnaII}{#2}
  \else
      \PackageWarning{title}{It is too many - more than 2 approving bosses!}%
 \fi\fi}

\renewcommand{\author}[2]{
 \ifx\undefined\@aupI
 \newcommand{\@aupI}{#1}  \newcommand{\@aunI}{#2}
 \else
  \ifx\undefined\@aupII
  \newcommand{\@aupII}{#1}  \newcommand{\@aunII}{#2}
  \else
   \ifx\undefined\@aupIII
   \newcommand{\@aupIII}{#1}  \newcommand{\@aunIII}{#2}
   \else
    \ifx\undefined\@aupIV
    \newcommand{\@aupIV}{#1}  \newcommand{\@aunIV}{#2}
    \else
     \ifx\undefined\@aupV
     \newcommand{\@aupV}{#1}  \newcommand{\@aunV}{#2}
     \else
      \ifx\undefined\@aupVI
      \newcommand{\@aupVI}{#1}  \newcommand{\@aunVI}{#2}
      \else
       \ifx\undefined\@aupVII
       \newcommand{\@aupVII}{#1}  \newcommand{\@aunVII}{#2}
       \else
        \ifx\undefined\@aupVIII
        \newcommand{\@aupVIII}{#1}  \newcommand{\@aunVIII}{#2}
        \else
         \ifx\undefined\@aupIX
         \newcommand{\@aupIX}{#1}  \newcommand{\@aunIX}{#2}
         \else
          \ifx\undefined\@aupX
          \newcommand{\@aupX}{#1}  \newcommand{\@aunX}{#2}
          \else
      \PackageWarning{title}{It is too many - more than ten authors!}%
 \fi\fi\fi\fi\fi\fi\fi\fi\fi\fi}

\newcommand{\beforetitle}[1]{\newcommand{\@beforetitle}{#1}}
\newcommand{\subtitle}[1]{\newcommand{\@subtitle}{#1}}

% доля страницы для подписи авторов
\newcommand\@authsize{.46}
\newcommand\@authsizenextpage{.3}
\newcommand{\authsize}[1]{\renewcommand{\@authsize}{#1}}
% доля страницы для подписи начальников
\newcommand\@apprsize{.4}
\newcommand{\apprsize}[1]{\renewcommand{\@apprsize}{#1}}
\newcommand\@bosssize{.46}
\newcommand{\bosssize}[1]{\renewcommand{\@bosssize}{#1}}
%
% для показа списка авторов
\newcommand{\showathors}{
\if@afterbosses %
% показ после начальников в правой колонке
% #### s4145 придется переделывать, как на отдельной странице, для выравнивания влево
 \noindent
 \makebox[\textwidth]{%
   \hfill
%   \renewcommand\@authsize{.46}
   \parbox[t]{\@authsize\textwidth}{
     \ifx\undefined\@aupI \else
       {\@aupI} \\[3mm]
%       \makebox[\@authsize\textwidth]{\hfill \@aunI} \\[5mm]
       \makebox[\@authsize\textwidth]{\hspace{2cm} \@aunI} \\[5mm]
     \fi
     \ifx\undefined\@aupII \else
       {\@aupII} \\[3mm]
       \makebox[\@authsize\textwidth]{\hspace{2cm} \@aunII} \\[5mm]
     \fi
     \ifx\undefined\@aupIII \else
       {\@aupIII} \\[3mm]
       \makebox[\@authsize\textwidth]{\hspace{2cm} \@aunIII} \\[5mm]
     \fi
     \ifx\undefined\@aupIV \else
       {\@aupIV} \\[3mm]
       \makebox[\@authsize\textwidth]{\hspace{2cm} \@aunIV} \\[5mm]
     \fi}
 }
\else
 \vspace{0.5cm}
 \noindent
 \makebox[\textwidth]{%
   \parbox[t]{\textwidth}{
     \ifx\undefined\@aupI \else
% #### s4145 переделано для выравнивания влево
       {\@aupI} \hfill
       %\makebox[\@authsize\textwidth]{\hfill \@aunI} \\[5mm]
       \makebox[\@authsizenextpage\textwidth]{\@aunI\hfill} \\[5mm]
     \fi
     \ifx\undefined\@aupII \else
       {\@aupII} \hfill
       \makebox[\@authsizenextpage\textwidth]{\@aunII\hfill} \\[5mm]
     \fi
     \ifx\undefined\@aupIII \else
       {\@aupIII} \hfill
       \makebox[\@authsizenextpage\textwidth]{\@aunIII\hfill} \\[5mm]
     \fi
     \ifx\undefined\@aupIV \else
       {\@aupIV} \hfill
       \makebox[\@authsizenextpage\textwidth]{\@aunIV\hfill} \\[5mm]
     \fi
     \ifx\undefined\@aupV \else
       {\@aupV} \hfill
       \makebox[\@authsizenextpage\textwidth]{\@aunV\hfill} \\[5mm]
     \fi
     \ifx\undefined\@aupVI \else
       {\@aupVI} \hfill
       \makebox[\@authsizenextpage\textwidth]{\@aunVI\hfill} \\[5mm]
     \fi
     \ifx\undefined\@aupVII \else
       {\@aupVII} \hfill
       \makebox[\@authsizenextpage\textwidth]{\@aunVII\hfill} \\[5mm]
     \fi
     \ifx\undefined\@aupVIII \else
       {\@aupVIII} \hfill
       \makebox[\@authsizenextpage\textwidth]{\@aunVIII\hfill} \\[5mm]
     \fi
     \ifx\undefined\@aupIX \else
       {\@aupIX} \hfill
       \makebox[\@authsizenextpage\textwidth]{\@aunIX\hfill} \\[5mm]
     \fi
     \ifx\undefined\@aupX \else
       {\@aupX} \hfill
       \makebox[\@authsizenextpage\textwidth]{\@aunX\hfill} \\[5mm]
     \fi
   }
%   \hfill
%   \parbox[t]{\@authsize\textwidth}{
%   }
 }
\fi}
% для показа списка начальников
\newcommand{\showbosses}{
 \noindent
 \makebox[\textwidth]{%
   \parbox[t]{\@bosssize\textwidth}{
     \ifx\undefined\@bspI \else
       {\@bspI} \\[3mm]
       \makebox[\@bosssize\textwidth]{\hspace{2.0cm}  \@bsnI} \\[5mm]
     \fi
     \ifx\undefined\@bspIII \else
       {\@bspIII} \\[3mm]
       \makebox[\@bosssize\textwidth]{\hspace{2.0cm}  \@bsnIII} \\[5mm]
     \fi
     \ifx\undefined\@bspV \else
       {\@bspV} \\[3mm]
       \makebox[\@bosssize\textwidth]{\hspace{2.0cm}  \@bsnV} \\[5mm]
     \fi
     \ifx\undefined\@bspVII \else
       {\@bspVII} \\[3mm]
       \makebox[\@bosssize\textwidth]{\hspace{2.0cm}  \@bsnVII} \\[5mm]
     \fi
   }
   \hfill
   \parbox[t]{\@bosssize\textwidth}{
     \ifx\undefined\@bspII \else
       {\@bspII} \\[3mm]
%       \makebox[\@bosssize\textwidth]{\hfill  \@bsnII} \\[5mm]
       \makebox[\@bosssize\textwidth]{\hspace{2.0cm} \@bsnII} \\[5mm]
     \fi
     \ifx\undefined\@bspIV \else
       {\@bspIV} \\[3mm]
       \makebox[\@bosssize\textwidth]{\hspace{2.0cm}  \@bsnIV} \\[5mm]
     \fi
     \ifx\undefined\@bspVI \else
       {\@bspVI} \\[3mm]
       \makebox[\@bosssize\textwidth]{\hspace{2.0cm}  \@bsnVI} \\[5mm]
     \fi
     \ifx\undefined\@bspVIII \else
       {\@bspVIII} \\[3mm]
       \makebox[\@bosssize\textwidth]{\hspace{2.0cm}  \@bsnVIII} \\[5mm]
     \fi
   }
 }
}
%
\renewcommand{\maketitle}{%
\begin{titlepage}
\noindent
\parbox{\textwidth}{\large\centering\@organ\bigskip\bigskip} %
\ifx\undefined\@udk
  \ifx\undefined\@grif
    \else \parbox{0pt}{} \hfill \parbox[t]{\@apprsize\textwidth}{\@grif}
  \fi
\else \CYRU\CYRD\CYRK~\@udk \hfill
  \ifx\undefined\@grif
    \else \parbox[t]{\@apprsize\textwidth}{\@grif}
  \fi
  \hfill \\
\fi %
%
\ifx\undefined\@reg
  \ifx\undefined \@perechen
    \else \parbox{0pt}{} \hfill \parbox[t]{\@apprsize\textwidth}{\@perechen}
  \fi
\else
  \CYRR\cyre\cyrg\cyri\cyrs\cyrt\cyrr\cyra\cyrc\cyri\cyro\cyrn\cyrn\cyrery\cyrishrt~\No
  \@reg \hfill
  \ifx\undefined\@perechen
    \else \parbox[t]{\@apprsize\textwidth}{\@perechen}
  \fi
  \hfill \\
\fi %
\hfill \ifx\undefined\@inv
  \ifx\undefined\@ekz
    \else \parbox{0pt}{} \hfill
    \parbox[t]{\@apprsize\textwidth}{\CYREREV\cyrk\cyrz.~\No\@ekz}
  \fi
  \else
  \CYRI\cyrn\cyrv\cyre\cyrn\cyrt\cyra\cyrr\cyrn\cyrery\cyrishrt~\No\@inv
  \hfill
  \ifx\undefined\@ekz
    \else \parbox[t]{\@apprsize\textwidth}{\CYREREV\cyrk\cyrz.~\No\@ekz}
  \fi
  \hfill \\
\fi %
%

\noindent
\makebox[\textwidth]{%
 \parbox[t]{\@apprsize\textwidth}{%\large
  \ifx\undefined\@bspaII\else
%    {\slshape \CYRU\CYRT\CYRV\CYRE\CYRZH\CYRD\CYRA\CYRYU\\
    {\CYRU\CYRT\CYRV\CYRE\CYRR\CYRZH\CYRD\CYRA\CYRYU\\
    \@bspaII\\
%    \makebox[\@apprsize\textwidth]{\hfill \@bsnaII}}
    \makebox[\@apprsize\textwidth]{\hspace{1.5cm} \@bsnaII}}
  \fi} \hfill%
 \parbox[t]{\@apprsize\textwidth}{%\large
   \ifx\undefined\@bspaI \else
%     {\slshape \CYRU\CYRT\CYRV\CYRE\CYRZH\CYRD\CYRA\CYRYU \\
     {\CYRU\CYRT\CYRV\CYRE\CYRR\CYRZH\CYRD\CYRA\CYRYU \\
     {\@bspaI \\
%     \makebox[\@apprsize\textwidth]{\hfill \@bsnaI}}}
     \makebox[\@apprsize\textwidth]{\hspace{1.5cm} \@bsnaI}}}
   \fi}
}

\vfill

\noindent\makebox[\textwidth]{\hfil \LARGE \bf \@doctype \hfil}\par
\medskip
  \ifx\undefined\@beforetitle\else\@beforetitle \fi
\par
\noindent \parbox{\textwidth}{\large\bf \centering \@title}\par
 \bigskip
 \noindent
 \ifx\undefined\@subtitle
 \else
   \parbox{\textwidth}{\@subtitle}
 \fi

\vfill

\if@authorspage
  \ifx\undefined\@bosshead\else
    \noindent
    \makebox[\textwidth]{% вставка \@bosshead
      \parbox[t]{\@bosssize\textwidth}{\@bosshead}
    \hfill}
  \fi
  \showbosses
\else
%%% авторы на первой странице
\if@afterbosses %
% сначала показ начальников
  \ifx\undefined\@bosshead\else
    \noindent
    \makebox[\textwidth]{% вставка \@bosshead
      \parbox[t]{\@bosssize\textwidth}{\@bosshead}
    \hfill}
  \fi
  \showbosses
% затем исполнителей
  \ifx\undefined\@authead\else
    \noindent
    \makebox[\textwidth]{
     \hfill \parbox[t]{\@authsize\textwidth}{\@authead}
    }
  \fi
  \medskip
  \showathors
\else %
  \noindent
  \makebox[\textwidth]{% вставка \@bosshead и \@authead
    \parbox[t]{\@bosssize\textwidth}{\ifx\undefined\@bosshead\else\@bosshead\fi}
    \hfill
    \parbox[t]{\@authsize\textwidth}{\@authead}
  }
  \noindent
  \makebox[\textwidth]{%
  \parbox[t]{\@bosssize\textwidth}{
   \ifx\undefined\@bspI \else
     {\@bspI} \\[3mm]
%     \makebox[\@bosssize\textwidth]{\hfill \slshape \@bsnI}\\[5mm]
     \makebox[\@bosssize\textwidth]{\hspace{2cm} \@bsnI}\\[5mm]
   \fi
   \ifx\undefined\@bspII \else
     {\@bspII} \\[3mm]
     \makebox[\@bosssize\textwidth]{\hfill \slshape \@bsnII}\\[5mm]
   \fi
   \ifx\undefined\@bspIV \else
     {\@bspIII}\\[3mm]
     \makebox[\@bosssize\textwidth]{\hfill \slshape \@bsnIII}\\[5mm]
   \fi
   \ifx\undefined\@bspV \else
     {\@bspIV} \\[3mm]
     \makebox[\@bosssize\textwidth]{\hfill \slshape \@bsnIV}\\[5mm]
   \fi}
  \hfill
 \parbox[t]{\@authsize\textwidth}{%
 \ifx\undefined\@aupI \else
   {\@aupI} \\
   \makebox[\@authsize\textwidth]{\hspace{2cm} \@aunI} \\[5mm]
 \ifx\undefined\@aupII \else
   {\@aupII} \\
   \makebox[\@authsize\textwidth]{\hfill \slshape \@aunII} \\[5mm]
 \fi
 \ifx\undefined\@aupIII \else
   {\@aupIII} \\
   \makebox[\@authsize\textwidth]{\hfill \slshape \@aunIII} \\[5mm]
 \fi
 \ifx\undefined\@aupIV \else
   {\@aupIV} \\
   \makebox[\@authsize\textwidth]{\hfill \slshape \@aunIV} \\[5mm]
 \fi
 \ifx\undefined\@aupV \else
   {\@aupV} \\
   \makebox[\@authsize\textwidth]{\hfill \slshape \@aunV}
 \fi
 \fi}}
\fi %
\fi %
\vfill

\noindent
\parbox{\textwidth}{\large \centering  \@city-\number\year}

\end{titlepage}

\if@authorspage
\begin{titlepage}
  \maketitlepagenum{2}%%%
  \ifx\undefined\@authead\else
    \noindent {\centering \@authead\\ }
  \fi
  \bigskip
  \showathors
  \par\vfill
\end{titlepage}
\fi }

\endinput
